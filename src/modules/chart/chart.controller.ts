import { Controller, Get, Query, Req } from '@nestjs/common';
import { ChartService } from './chart.service';

@Controller('chart')
export class ChartController {
  constructor(
    private ChartService: ChartService
  ) {}

  @Get()
  async getTickerData(
    @Query('ticker') ticker: string
  ) {
    const { data, error } = await this.ChartService.getDataByTicker(ticker);

    return { data, error };

    return { 
      data: {
          "generalData": {
              "Information": "Daily Prices (open, high, low, close) and Volumes",
              "Symbol": "NVDA",
              "Last Refreshed": "2025-05-14",
              "Output Size": "Compact",
              "Time Zone": "US/Eastern"
          },
          "chartData": [
              {
                  "time": "2024-12-18",
                  "open": 133.86,
                  "high": 136.7,
                  "low": 128.28,
                  "close": 128.91
              },
              {
                  "time": "2024-12-19",
                  "open": 131.76,
                  "high": 134.03,
                  "low": 129.55,
                  "close": 130.68
              },
              {
                  "time": "2024-12-20",
                  "open": 129.81,
                  "high": 135.28,
                  "low": 128.22,
                  "close": 134.7
              },
              {
                  "time": "2024-12-23",
                  "open": 136.28,
                  "high": 139.79,
                  "low": 135.1201,
                  "close": 139.67
              },
              {
                  "time": "2024-12-24",
                  "open": 140,
                  "high": 141.9,
                  "low": 138.65,
                  "close": 140.22
              },
              {
                  "time": "2024-12-26",
                  "open": 139.7,
                  "high": 140.85,
                  "low": 137.73,
                  "close": 139.93
              },
              {
                  "time": "2024-12-27",
                  "open": 138.55,
                  "high": 139.02,
                  "low": 134.71,
                  "close": 137.01
              },
              {
                  "time": "2024-12-30",
                  "open": 134.83,
                  "high": 140.27,
                  "low": 134.02,
                  "close": 137.49
              },
              {
                  "time": "2024-12-31",
                  "open": 138.03,
                  "high": 138.07,
                  "low": 133.83,
                  "close": 134.29
              },
              {
                  "time": "2025-01-02",
                  "open": 136,
                  "high": 138.88,
                  "low": 134.63,
                  "close": 138.31
              },
              {
                  "time": "2025-01-03",
                  "open": 140.01,
                  "high": 144.9,
                  "low": 139.73,
                  "close": 144.47
              },
              {
                  "time": "2025-01-06",
                  "open": 148.59,
                  "high": 152.156,
                  "low": 147.8201,
                  "close": 149.43
              },
              {
                  "time": "2025-01-07",
                  "open": 153.03,
                  "high": 153.13,
                  "low": 140.01,
                  "close": 140.14
              },
              {
                  "time": "2025-01-08",
                  "open": 142.58,
                  "high": 143.95,
                  "low": 137.56,
                  "close": 140.11
              },
              {
                  "time": "2025-01-10",
                  "open": 137.45,
                  "high": 139.92,
                  "low": 134.22,
                  "close": 135.91
              },
              {
                  "time": "2025-01-13",
                  "open": 129.99,
                  "high": 133.49,
                  "low": 129.51,
                  "close": 133.23
              },
              {
                  "time": "2025-01-14",
                  "open": 136.05,
                  "high": 136.38,
                  "low": 130.05,
                  "close": 131.76
              },
              {
                  "time": "2025-01-15",
                  "open": 133.65,
                  "high": 136.45,
                  "low": 131.29,
                  "close": 136.24
              },
              {
                  "time": "2025-01-16",
                  "open": 138.64,
                  "high": 138.75,
                  "low": 133.49,
                  "close": 133.57
              },
              {
                  "time": "2025-01-17",
                  "open": 136.69,
                  "high": 138.5,
                  "low": 135.4649,
                  "close": 137.71
              },
              {
                  "time": "2025-01-21",
                  "open": 139.16,
                  "high": 141.83,
                  "low": 137.09,
                  "close": 140.83
              },
              {
                  "time": "2025-01-22",
                  "open": 144.66,
                  "high": 147.79,
                  "low": 143.67,
                  "close": 147.07
              },
              {
                  "time": "2025-01-23",
                  "open": 145.05,
                  "high": 147.23,
                  "low": 143.72,
                  "close": 147.22
              },
              {
                  "time": "2025-01-24",
                  "open": 148.37,
                  "high": 148.97,
                  "low": 141.88,
                  "close": 142.62
              },
              {
                  "time": "2025-01-27",
                  "open": 124.8,
                  "high": 128.4,
                  "low": 116.7,
                  "close": 118.42
              },
              {
                  "time": "2025-01-28",
                  "open": 121.81,
                  "high": 129,
                  "low": 116.25,
                  "close": 128.99
              },
              {
                  "time": "2025-01-29",
                  "open": 126.5,
                  "high": 126.89,
                  "low": 120.05,
                  "close": 123.7
              },
              {
                  "time": "2025-01-30",
                  "open": 123.1,
                  "high": 125,
                  "low": 118.1,
                  "close": 124.65
              },
              {
                  "time": "2025-01-31",
                  "open": 123.78,
                  "high": 127.85,
                  "low": 119.19,
                  "close": 120.07
              },
              {
                  "time": "2025-02-03",
                  "open": 114.75,
                  "high": 118.57,
                  "low": 113.01,
                  "close": 116.66
              },
              {
                  "time": "2025-02-04",
                  "open": 116.96,
                  "high": 121.2,
                  "low": 116.7,
                  "close": 118.65
              },
              {
                  "time": "2025-02-05",
                  "open": 121.76,
                  "high": 125,
                  "low": 120.76,
                  "close": 124.83
              },
              {
                  "time": "2025-02-06",
                  "open": 127.42,
                  "high": 128.77,
                  "low": 125.21,
                  "close": 128.68
              },
              {
                  "time": "2025-02-07",
                  "open": 129.22,
                  "high": 130.37,
                  "low": 125,
                  "close": 129.84
              },
              {
                  "time": "2025-02-10",
                  "open": 130.09,
                  "high": 135,
                  "low": 129.96,
                  "close": 133.57
              },
              {
                  "time": "2025-02-11",
                  "open": 132.58,
                  "high": 134.48,
                  "low": 131.02,
                  "close": 132.8
              },
              {
                  "time": "2025-02-12",
                  "open": 130.02,
                  "high": 132.24,
                  "low": 129.08,
                  "close": 131.14
              },
              {
                  "time": "2025-02-13",
                  "open": 131.555,
                  "high": 136.5,
                  "low": 131.17,
                  "close": 135.29
              },
              {
                  "time": "2025-02-14",
                  "open": 136.48,
                  "high": 139.25,
                  "low": 135.5,
                  "close": 138.85
              },
              {
                  "time": "2025-02-18",
                  "open": 141.27,
                  "high": 143.44,
                  "low": 137.925,
                  "close": 139.4
              },
              {
                  "time": "2025-02-19",
                  "open": 139.51,
                  "high": 141.36,
                  "low": 137.22,
                  "close": 139.23
              },
              {
                  "time": "2025-02-20",
                  "open": 140.03,
                  "high": 140.66,
                  "low": 136.7901,
                  "close": 140.11
              },
              {
                  "time": "2025-02-21",
                  "open": 140.04,
                  "high": 141.46,
                  "low": 134.03,
                  "close": 134.43
              },
              {
                  "time": "2025-02-24",
                  "open": 136.56,
                  "high": 138.59,
                  "low": 130.08,
                  "close": 130.28
              },
              {
                  "time": "2025-02-25",
                  "open": 129.98,
                  "high": 130.2,
                  "low": 124.44,
                  "close": 126.63
              },
              {
                  "time": "2025-02-26",
                  "open": 129.985,
                  "high": 133.73,
                  "low": 128.49,
                  "close": 131.28
              },
              {
                  "time": "2025-02-27",
                  "open": 135,
                  "high": 135.01,
                  "low": 120.01,
                  "close": 120.15
              },
              {
                  "time": "2025-02-28",
                  "open": 118.02,
                  "high": 125.09,
                  "low": 116.4,
                  "close": 124.92
              },
              {
                  "time": "2025-03-03",
                  "open": 123.51,
                  "high": 123.7,
                  "low": 112.28,
                  "close": 114.06
              },
              {
                  "time": "2025-03-04",
                  "open": 110.645,
                  "high": 119.31,
                  "low": 110.11,
                  "close": 115.99
              },
              {
                  "time": "2025-03-05",
                  "open": 117.58,
                  "high": 118.2781,
                  "low": 114.51,
                  "close": 117.3
              },
              {
                  "time": "2025-03-06",
                  "open": 113.53,
                  "high": 115.35,
                  "low": 110.22,
                  "close": 110.57
              },
              {
                  "time": "2025-03-07",
                  "open": 111.25,
                  "high": 113.48,
                  "low": 107.56,
                  "close": 112.69
              },
              {
                  "time": "2025-03-10",
                  "open": 109.9,
                  "high": 111.85,
                  "low": 105.46,
                  "close": 106.98
              },
              {
                  "time": "2025-03-11",
                  "open": 106.99,
                  "high": 112.236,
                  "low": 104.77,
                  "close": 108.76
              },
              {
                  "time": "2025-03-12",
                  "open": 114.12,
                  "high": 116.76,
                  "low": 112.88,
                  "close": 115.74
              },
              {
                  "time": "2025-03-13",
                  "open": 117.03,
                  "high": 117.76,
                  "low": 113.79,
                  "close": 115.58
              },
              {
                  "time": "2025-03-14",
                  "open": 118.61,
                  "high": 121.88,
                  "low": 118.15,
                  "close": 121.67
              },
              {
                  "time": "2025-03-17",
                  "open": 122.74,
                  "high": 122.89,
                  "low": 118.03,
                  "close": 119.53
              },
              {
                  "time": "2025-03-18",
                  "open": 118,
                  "high": 119.02,
                  "low": 114.54,
                  "close": 115.43
              },
              {
                  "time": "2025-03-19",
                  "open": 117.27,
                  "high": 120.445,
                  "low": 115.68,
                  "close": 117.52
              },
              {
                  "time": "2025-03-20",
                  "open": 116.55,
                  "high": 120.2,
                  "low": 116.47,
                  "close": 118.53
              },
              {
                  "time": "2025-03-21",
                  "open": 116.94,
                  "high": 117.99,
                  "low": 115.42,
                  "close": 117.7
              },
              {
                  "time": "2025-03-24",
                  "open": 119.88,
                  "high": 122.22,
                  "low": 119.34,
                  "close": 121.41
              },
              {
                  "time": "2025-03-25",
                  "open": 120.545,
                  "high": 121.29,
                  "low": 118.92,
                  "close": 120.69
              },
              {
                  "time": "2025-03-26",
                  "open": 118.73,
                  "high": 118.84,
                  "low": 112.71,
                  "close": 113.76
              },
              {
                  "time": "2025-03-27",
                  "open": 111.35,
                  "high": 114.45,
                  "low": 110.66,
                  "close": 111.43
              },
              {
                  "time": "2025-03-28",
                  "open": 111.485,
                  "high": 112.87,
                  "low": 109.0701,
                  "close": 109.67
              },
              {
                  "time": "2025-03-31",
                  "open": 105.13,
                  "high": 110.955,
                  "low": 103.65,
                  "close": 108.38
              },
              {
                  "time": "2025-04-01",
                  "open": 108.515,
                  "high": 110.2,
                  "low": 106.47,
                  "close": 110.15
              },
              {
                  "time": "2025-04-02",
                  "open": 107.29,
                  "high": 111.98,
                  "low": 106.79,
                  "close": 110.42
              },
              {
                  "time": "2025-04-03",
                  "open": 103.51,
                  "high": 105.63,
                  "low": 101.6,
                  "close": 101.8
              },
              {
                  "time": "2025-04-04",
                  "open": 98.91,
                  "high": 100.13,
                  "low": 92.11,
                  "close": 94.31
              },
              {
                  "time": "2025-04-07",
                  "open": 87.46,
                  "high": 101.75,
                  "low": 86.62,
                  "close": 97.64
              },
              {
                  "time": "2025-04-08",
                  "open": 103.805,
                  "high": 105.85,
                  "low": 94.46,
                  "close": 96.3
              },
              {
                  "time": "2025-04-09",
                  "open": 98.89,
                  "high": 115.1,
                  "low": 97.5301,
                  "close": 114.33
              },
              {
                  "time": "2025-04-10",
                  "open": 109.37,
                  "high": 110.86,
                  "low": 99.15,
                  "close": 107.57
              },
              {
                  "time": "2025-04-11",
                  "open": 108.5,
                  "high": 111.5499,
                  "low": 107.48,
                  "close": 110.93
              },
              {
                  "time": "2025-04-14",
                  "open": 114.11,
                  "high": 114.29,
                  "low": 109.07,
                  "close": 110.71
              },
              {
                  "time": "2025-04-15",
                  "open": 110.97,
                  "high": 113.615,
                  "low": 110.5,
                  "close": 112.2
              },
              {
                  "time": "2025-04-16",
                  "open": 104.55,
                  "high": 106.79,
                  "low": 100.45,
                  "close": 104.49
              },
              {
                  "time": "2025-04-17",
                  "open": 104.45,
                  "high": 104.47,
                  "low": 100.05,
                  "close": 101.49
              },
              {
                  "time": "2025-04-21",
                  "open": 98.77,
                  "high": 99.44,
                  "low": 95.04,
                  "close": 96.91
              },
              {
                  "time": "2025-04-22",
                  "open": 98.78,
                  "high": 99.811,
                  "low": 97.28,
                  "close": 98.89
              },
              {
                  "time": "2025-04-23",
                  "open": 104.52,
                  "high": 104.8,
                  "low": 102.02,
                  "close": 102.71
              },
              {
                  "time": "2025-04-24",
                  "open": 103.475,
                  "high": 106.54,
                  "low": 103.11,
                  "close": 106.43
              },
              {
                  "time": "2025-04-25",
                  "open": 106.85,
                  "high": 111.92,
                  "low": 105.73,
                  "close": 111.01
              },
              {
                  "time": "2025-04-28",
                  "open": 109.69,
                  "high": 110.3699,
                  "low": 106.02,
                  "close": 108.73
              },
              {
                  "time": "2025-04-29",
                  "open": 107.67,
                  "high": 110.1999,
                  "low": 107.44,
                  "close": 109.02
              },
              {
                  "time": "2025-04-30",
                  "open": 104.47,
                  "high": 108.92,
                  "low": 104.08,
                  "close": 108.92
              },
              {
                  "time": "2025-05-01",
                  "open": 113.08,
                  "high": 114.94,
                  "low": 111.3,
                  "close": 111.61
              },
              {
                  "time": "2025-05-02",
                  "open": 114.18,
                  "high": 115.4,
                  "low": 113.37,
                  "close": 114.5
              },
              {
                  "time": "2025-05-05",
                  "open": 112.905,
                  "high": 114.665,
                  "low": 112.66,
                  "close": 113.82
              },
              {
                  "time": "2025-05-06",
                  "open": 111.48,
                  "high": 114.74,
                  "low": 110.822,
                  "close": 113.54
              },
              {
                  "time": "2025-05-07",
                  "open": 113.045,
                  "high": 117.68,
                  "low": 112.2818,
                  "close": 117.06
              },
              {
                  "time": "2025-05-08",
                  "open": 118.25,
                  "high": 118.68,
                  "low": 115.85,
                  "close": 117.37
              },
              {
                  "time": "2025-05-09",
                  "open": 117.35,
                  "high": 118.23,
                  "low": 115.21,
                  "close": 116.65
              },
              {
                  "time": "2025-05-12",
                  "open": 121.97,
                  "high": 123,
                  "low": 120.28,
                  "close": 123
              },
              {
                  "time": "2025-05-13",
                  "open": 124.98,
                  "high": 131.2189,
                  "low": 124.47,
                  "close": 129.93
              },
              {
                  "time": "2025-05-14",
                  "open": 133.195,
                  "high": 135.435,
                  "low": 131.68,
                  "close": 135.34
              }
          ]
      } 
    }
  }
}
